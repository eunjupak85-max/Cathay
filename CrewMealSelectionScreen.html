<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cathay Pacific ‚Äì Crew Meal Request</title>
<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background-color: #F6F6F6;
    color: #333333;
    margin: 40px auto;
    max-width: 750px;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  h1 {
    color: #00666A;
    text-align: center;
  }
  .notice {
    background-color: #E9F7F7;
    border-left: 5px solid #007C7C;
    padding: 10px 15px;
    margin-bottom: 20px;
  }
  label {
    display: block;
    margin: 10px 0 5px;
    font-weight: 600;
  }
  select, input[type="date"], button {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 15px;
  }
  button {
    background-color: #00666A;
    color: white;
    cursor: pointer;
    border: none;
  }
  button:hover {
    background-color: #007C7C;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 25px;
  }
  th, td {
    border: 1px solid #ccc;
    padding: 8px 10px;
    text-align: left;
  }
  th {
    background-color: #EDEDED;
  }
  .empty {
    text-align: center;
    color: #777;
    font-style: italic;
  }
</style>
</head>
<body>

<h1>Cathay Pacific ‚Äì Crew Meal Request</h1>

<div class="notice">
  üçΩÔ∏è You can apply for your in-flight meal up to <strong>2 months (61 days)</strong> in advance.
</div>

<form id="mealForm">
  <label for="effectiveDate">Effective Date:</label>
  <input type="date" id="effectiveDate" required>

  <label for="mealCategory">Select Meal Category:</label>
  <select id="mealCategory" required>
    <option value="">-- Select Category --</option>
    <option value="Standard">Standard Meal</option>
    <option value="Vegetarian">Vegetarian</option>
    <option value="Vegan">Vegan</option>
    <option value="Religious">Religious Meal</option>
    <option value="Medical">Medical Meal</option>
  </select>

  <label for="mealType">Select Meal Type:</label>
  <select id="mealType" required disabled>
    <option value="">-- Select Type --</option>
  </select>

  <button type="submit">Submit Meal Request</button>
</form>

<h2>Previous Meal Requests</h2>
<table id="requestTable">
  <thead>
    <tr>
      <th>Date Requested</th>
      <th>Effective Date</th>
      <th>Meal Category</th>
      <th>Meal Type</th>
    </tr>
  </thead>
  <tbody id="requestList">
    <tr><td>2025-05-10</td><td>2025-07-15</td><td>Vegetarian</td><td>Lacto-Ovo Vegetarian Meal (VLML)</td></tr>
    <tr><td>2025-06-01</td><td>2025-08-20</td><td>Religious</td><td>Hindu Meal (HNML)</td></tr>
    <tr><td>2025-07-05</td><td>2025-09-12</td><td>Medical</td><td>Low Fat Meal (LFML)</td></tr>
  </tbody>
</table>

<script>
  // --- Pre-set Effective Date: Today + 60 days ---
  const dateInput = document.getElementById('effectiveDate');
  const today = new Date();
  const twoMonthsLater = new Date(today.setDate(today.getDate() + 61));
  dateInput.valueAsDate = twoMonthsLater;

  // --- Meal Category & Type 2-tier logic ---
  const mealOptions = {
    "Standard": [
      "Asian Meal (ASML)",
      "Western Meal (WSML)"
    ],
    "Vegetarian": [
      "Lacto-Ovo Vegetarian Meal (VLML)",
      "Vegan Meal (VGML)"
    ],
    "Vegan": [
      "Strict Vegan Meal (VGML)",
      "Raw Vegetable Meal (RVML)"
    ],
    "Religious": [
      "Hindu Meal (HNML)",
      "Muslim Meal (MOML)",
      "Kosher Meal (KSML)"
    ],
    "Medical": [
      "Low Fat Meal (LFML)",
      "Low Calorie Meal (LCML)",
      "Gluten-Free Meal (GFML)"
    ]
  };

  const categorySelect = document.getElementById('mealCategory');
  const typeSelect = document.getElementById('mealType');

  categorySelect.addEventListener('change', () => {
    const selectedCategory = categorySelect.value;
    typeSelect.innerHTML = '<option value="">-- Select Type --</option>';
    if (selectedCategory && mealOptions[selectedCategory]) {
      mealOptions[selectedCategory].forEach(type => {
        const option = document.createElement('option');
        option.value = type;
        option.textContent = type;
        typeSelect.appendChild(option);
      });
      typeSelect.disabled = false;
    } else {
      typeSelect.disabled = true;
    }
  });

  // --- Form Submission ---
  const form = document.getElementById('mealForm');
  const requestList = document.getElementById('requestList');

  form.addEventListener('submit', (e) => {
    e.preventDefault();

    const effectiveDate = new Date(document.getElementById('effectiveDate').value);
    const mealCategory = categorySelect.value;
    const mealType = typeSelect.value;
    const now = new Date();
    const diffDays = (effectiveDate - now) / (1000 * 60 * 60 * 24);

    if (diffDays < 60) {
      alert("‚ö†Ô∏è Please select an effective date at least 60 days in advance.");
      return;
    }

    const todayStr = new Date().toISOString().split('T')[0];
    const row = document.createElement('tr');
    row.innerHTML = `<td>${todayStr}</td><td>${effectiveDate.toISOString().split('T')[0]}</td><td>${mealCategory}</td><td>${mealType}</td>`;
    requestList.appendChild(row);

    form.reset();
    typeSelect.disabled = true;
    alert("‚úÖ Your meal request has been submitted successfully!");
  });
</script>

</body>
</html>
